local SpammingMoves = false

local Moves = {
    "Big Bang Kamehameha";
    "Blaster Meteor";
}

local BrolyFrame = script.Parent:WaitForChild("BrolyFrame") -- Se asume que este script es hijo del OuterFrame o cerca, y que BrolyFrame existe.

-- BOTONES Y FRAMES DENTRO DE BROLYFRAME

local queueButton = Instance.new("TextButton")
queueButton.Name = "QueueButton"
queueButton.Size = UDim2.new(0, 150, 0, 30)
queueButton.Position = UDim2.new(1, -160, 0, 10)  -- Posicionado dentro de BrolyFrame (ajustado a top right)
queueButton.Text = "Queue"
queueButton.Font = Enum.Font.SourceSansBold
queueButton.TextSize = 18
queueButton.TextColor3 = Color3.new(1, 1, 1)
queueButton.BackgroundColor3 = Color3.new(0, 0, 0)
queueButton.Parent = BrolyFrame

local slotsButton = Instance.new("TextButton")
slotsButton.Name = "SlotsButton"
slotsButton.Size = UDim2.new(0, 150, 0, 30)
slotsButton.Position = UDim2.new(1, -160, 0, 50)
slotsButton.Text = "Slots"
slotsButton.Font = Enum.Font.SourceSansBold
slotsButton.TextSize = 18
slotsButton.TextColor3 = Color3.new(1, 1, 1)
slotsButton.BackgroundColor3 = Color3.new(0, 0, 0)
slotsButton.Parent = BrolyFrame

local slotsMenu = Instance.new("Frame")
slotsMenu.Name = "SlotsMenu"
slotsMenu.Size = UDim2.new(0, 150, 0, 90)
slotsMenu.Position = UDim2.new(1, -160, 0, 90)
slotsMenu.BackgroundColor3 = Color3.new(0.2, 0.2, 0.2)
slotsMenu.Visible = false
slotsMenu.Parent = BrolyFrame

local function createSlotButton(slotName, positionY)
    local slotButton = Instance.new("TextButton")
    slotButton.Name = slotName .. "Button"
    slotButton.Size = UDim2.new(1, 0, 0, 30)
    slotButton.Position = UDim2.new(0, 0, 0, positionY)
    slotButton.Text = slotName
    slotButton.Font = Enum.Font.SourceSans
    slotButton.TextSize = 16
    slotButton.TextColor3 = Color3.new(1, 1, 1)
    slotButton.BackgroundColor3 = Color3.new(0, 0, 0)
    slotButton.Parent = slotsMenu
    return slotButton
end

local slot1Button = createSlotButton("Slot 1", 0)
local slot2Button = createSlotButton("Slot 2", 30)
local slot3Button = createSlotButton("Slot 3", 60)

local startButton = Instance.new("TextButton")
startButton.Name = "StartButton"
startButton.Size = UDim2.new(0, 150, 0, 30)
startButton.Position = UDim2.new(1, -160, 0, -35)
startButton.Text = "Iniciar"
startButton.Font = Enum.Font.SourceSansBold
startButton.TextSize = 18
startButton.TextColor3 = Color3.new(1, 1, 1)
startButton.BackgroundColor3 = Color3.new(0, 0, 0)
startButton.Parent = BrolyFrame

local startMovesButton = Instance.new("TextButton")
startMovesButton.Name = "StartMovesButton"
startMovesButton.Size = UDim2.new(0, 150, 0, 30)
startMovesButton.Position = UDim2.new(1, -160, 0, 0)
startMovesButton.Text = "Start Moves"
startMovesButton.Font = Enum.Font.SourceSansBold
startMovesButton.TextSize = 18
startMovesButton.TextColor3 = Color3.new(1, 1, 1)
startMovesButton.BackgroundColor3 = Color3.new(0, 0, 0)
startMovesButton.Parent = BrolyFrame

startMovesButton.MouseButton1Click:Connect(function()
    SpammingMoves = not SpammingMoves
    if SpammingMoves then
        startMovesButton.Text = "Stop Moves"
        while SpammingMoves do
            task.wait()
            for _, moveName in ipairs(Moves) do
                for _, v in pairs(game.Players.LocalPlayer.Backpack:GetChildren()) do
                    if v.Name:lower() == moveName:lower() then
                        v.Parent = game.Players.LocalPlayer.Character
                        v:Activate()
                        v:Deactivate()
                        task.wait(.1)
                        v.Parent = game.Players.LocalPlayer.Backpack
                    end
                end
            end
        end
    else
        startMovesButton.Text = "Start Moves"
    end
end)

local Player = game.Players.LocalPlayer
local Settings = { ChangeSlotTime = 2 }

local function changeSlot(slot)
    Player.Backpack.ServerTraits.ChatStart:FireServer(workspace.FriendlyNPCs["Character Slot Changer"])
    task.wait(0.55)
    Player.Backpack.ServerTraits.ChatAdvance:FireServer({"Yes"})
    task.wait(0.55)
    Player.Backpack.ServerTraits.ChatAdvance:FireServer({"k"})
    task.wait(0.55)
    Player.Backpack.ServerTraits.ChatAdvance:FireServer({slot})
    task.wait(Settings.ChangeSlotTime)
end

slot1Button.MouseButton1Click:Connect(function() changeSlot("Slot1") end)
slot2Button.MouseButton1Click:Connect(function() changeSlot("Slot2") end)
slot3Button.MouseButton1Click:Connect(function() changeSlot("Slot3") end)

local teleportService = game:GetService("TeleportService")
local placeId = 3565304751

local function teleportPlayer()
    teleportService:Teleport(placeId, Player)
end

local function toggleSlotsMenu()
    slotsMenu.Visible = not slotsMenu.Visible
end

queueButton.MouseButton1Click:Connect(teleportPlayer)
slotsButton.MouseButton1Click:Connect(toggleSlotsMenu)

game:GetService("RunService").Stepped:Connect(function()
    for _, v in pairs(game.Players.LocalPlayer.Character:GetChildren()) do
        if v.Name == "Action" or (v.Name == "Attacking") or 
           (v.Name == "Using") or (v.Name == "hyper") or 
           (v.Name == "Hyper") or (v.Name == "heavy") or 
           (v.Name == "KiBlasted") or (v.Name == "Tele") or 
           (v.Name == "tele") or (v.Name == "Killed") or 
           (v.Name == "Slow") then
            v:Destroy()
        end
        if game.Players.LocalPlayer.Character.Block.Value then
            game.Players.LocalPlayer.Character.Block.Value = false
        end
    end
end)

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local player = Players.LocalPlayer
local camera = workspace.CurrentCamera
local B = workspace:WaitForChild("Live"):WaitForChild("Broly BR")
local activated = false

if game.PlaceId == 2050207304 then
    game:GetService("RunService").RenderStepped:Connect(function()
        if B and B:FindFirstChild("Humanoid") and B.Humanoid.Health < .1 then
            game:GetService("TeleportService"):Teleport(3565304751)
        end
    end)

    startButton.MouseButton1Click:Connect(function()
        if activated then return end
        activated = true

        local character = player.Character or player.CharacterAdded:Wait()
        local hrp = character:WaitForChild("HumanoidRootPart")
        local npcHRP = B:WaitForChild("HumanoidRootPart")

        game.Players.LocalPlayer.Backpack.ServerTraits.EatSenzu:FireServer(true)
        RunService.RenderStepped:Connect(function()
            if character and hrp and npcHRP then
                hrp.CFrame = npcHRP.CFrame + npcHRP.CFrame.lookVector * -5
                camera.CFrame = CFrame.new(hrp.Position, npcHRP.Position) * CFrame.new(0, 5, 19)
                local humanoid = character:FindFirstChild("Humanoid")
                if humanoid then
                    humanoid:ChangeState(Enum.HumanoidStateType.PlatformStanding)
                end
                local head = character:FindFirstChild("Head")
                if head then
                    if head:FindFirstChild("KnockBacked") then head.KnockBacked:Destroy() end
                    if head:FindFirstChild("NotHardBack") then head.NotHardBack:Destroy() end
                end
            end
        end)
    end)

    game:GetService("RunService").RenderStepped:Connect(function()
        for _, i in pairs(workspace:GetChildren()) do
            if i.Name == "KiBlast" then
                i.CFrame = workspace.Live['Broly BR'].HumanoidRootPart.CFrame
            end
        end
    end)
end
